(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0540502a"],{"0c05":function(t,e,n){"use strict";var s=n("d300"),r=n.n(s);r.a},3638:function(t,e,n){},"4c53":function(t,e,n){"use strict";var s=n("23e7"),r=n("857a"),a=n("af03");s({target:"String",proto:!0,forced:a("sub")},{sub:function(){return r(this,"sub","","")}})},6049:function(t,e,n){"use strict";var s=n("3638"),r=n.n(s);r.a},"61ca":function(t,e,n){"use strict";var s=n("a7cc"),r=n.n(s);r.a},"71c2":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("el-row",[n("el-col",{attrs:{span:18,offset:3}},[n("div",{staticClass:"header_line"}),n("div",{staticClass:"header_a"},[n("span",[t._v(t._s(t.arr))])])])],1)],1)},r=[],a={props:["title"],data:function(){return{arr:this.title}},mounted:function(){}},i=a,o=(n("61ca"),n("2877")),l=Object(o["a"])(i,s,r,!1,null,"fa54168a",null);e["a"]=l.exports},"7c64":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("headers",{attrs:{title:t.title}})],1),n("el-row",[n("el-col",{attrs:{span:18,offset:3}},[n("div",{staticClass:"news"},[n("div",{staticClass:"news_title"},[n("span",[t._v("创建新闻")]),n("span",{staticClass:"r"},[n("span",{staticClass:"rs"},[t._v("*")]),n("span",[t._v("必填项")])])]),n("el-row",[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"news_form"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[n("el-form-item",{staticClass:"is-required",attrs:{label:"新闻版块",prop:"section"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.form.section,callback:function(e){t.$set(t.form,"section",e)},expression:"form.section"}},t._l(t.options,(function(t){return n("el-option",{key:t.id,attrs:{label:t.press_name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"新闻标题",prop:"title"}},[n("el-input",{attrs:{maxlength:"20"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("el-form-item",{staticClass:"is-required",attrs:{label:"新闻图片",prop:"image"}},[n("div",{staticClass:"files"},[t._v("+ "),n("div",{staticClass:"files_left"},[n("img",{staticStyle:{widows:"100px",height:"100px"},attrs:{src:t.form.image,alt:"",id:"image"}})]),n("div",{staticClass:"files_right"},[n("input",{staticClass:"form-control",attrs:{type:"file",name:"upload"},on:{change:t.onFileChange}})])])])],1)],1)],1),n("el-row",[n("el-col",[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{staticClass:"is-required",attrs:{label:"新闻正文"}},[n("div",{attrs:{id:"editor"}},[n("p")])]),n("el-form-item",[n("el-button",{attrs:{type:"primary",id:"btn2"}},[t._v("保存草稿")]),n("el-button",{attrs:{type:"primary",id:"btn1"}},[t._v("发布")])],1)],1)],1)],1)],1)])],1)],1)])],1)],1)},r=[],a=(n("4c53"),n("71c2")),i=(n("bc3a"),{components:{headers:a["a"]},data:function(){return{title:"新建新闻",imageUrl:"",poster:"",options:"",form:{section:"",title:"",author:"",text:"",image:""},rules:{title:[{required:!0,message:"标题不能为空"},{min:1,max:25,message:"不能超过25字"}],section:[{required:!0,message:"请选择版块",trigger:"change"}],image:[{required:!0,message:"请选择图片"}]}}},methods:{onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&this.createImage(e[0])},createImage:function(t){var e=this,n=(new Image,new FileReader),s=this;n.onload=function(t){s.form.image=t.target.result},n.readAsDataURL(t),setTimeout((function(){e.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1}))}),100)},save:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("是否保存草稿?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){if("confirm"===t){var n=new window.FormData,s=window.sessionStorage.getItem("userId");n.append("file",document.querySelector("input[type=file]").files[0]),n.append("title",e.form.title),n.append("particulars",e.form.text),n.append("userId",s),n.append("pressTypeId",e.form.section),e.$axios.post("/tomlive/pressCenter/noIssueSelectPressCenter",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),e.$router.push("/home/news_bc_c")}))}})).catch((function(){e.$message({type:"info",message:"已取消"})}))}))},sub:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("是否发布?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){if("confirm"===t){var n=new window.FormData,s=window.sessionStorage.getItem("userId");n.append("file",document.querySelector("input[type=file]").files[0]),n.append("title",e.form.title),n.append("particulars",e.form.text),n.append("userId",s),n.append("pressTypeId",e.form.section),e.$axios.post("/tomlive/pressCenter/insertSelectPressCenter",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),e.$router.push("/home/news_fb_c")}))}})).catch((function(){e.$message({type:"info",message:"已取消"})}))}))},btn:function(){}},mounted:function(){var t=this,e=this,n=window.wangEditor,s=new n("#editor");s.customConfig.uploadImgShowBase64=!0,s.customConfig.uploadImgMaxSize=3145728,s.customConfig.uploadImgMaxLength=5,s.create(),document.getElementById("btn1").addEventListener("click",(function(){e.form.text=s.txt.html(),e.sub("form")}),!1),document.getElementById("btn2").addEventListener("click",(function(){e.form.text=s.txt.html(),e.save("form")}),!1),this.$axios.post("/tomlive/pressType/selectAllPressType").then((function(e){console.log(e);var n=e.data.info;t.options=n}))}}),o=i,l=(n("6049"),n("a77f"),n("0c05"),n("2877")),c=Object(l["a"])(o,s,r,!1,null,"68e06cd0",null);e["default"]=c.exports},"857a":function(t,e,n){var s=n("1d80"),r=/"/g;t.exports=function(t,e,n,a){var i=String(s(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(a).replace(r,"&quot;")+'"'),o+">"+i+"</"+e+">"}},a167:function(t,e,n){},a77f:function(t,e,n){"use strict";var s=n("a167"),r=n.n(s);r.a},a7cc:function(t,e,n){},af03:function(t,e,n){var s=n("d039");t.exports=function(t){return s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},d300:function(t,e,n){}}]);
//# sourceMappingURL=chunk-0540502a.74c655a9.js.map